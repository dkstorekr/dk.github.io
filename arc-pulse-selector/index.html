<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ArcPulse Simulator</title>
  <style>
    :root { --w: 300px; }
    body{
      font-family: Arial, sans-serif;
      margin:0; padding:20px;
      display:flex; flex-direction:column; align-items:center;
      background:#f5f5f5;
    }
    h1{ margin-bottom:20px; color:#333; text-align:center; }

    /* Progress (장식) */
    .progress-bar{
      display:flex; justify-content:space-between;
      width:100%; max-width:var(--w); margin-bottom:20px;
      pointer-events:none;
    }
    .progress-step{ flex:1; height:5px; background:#ccc; margin:0 2px; border-radius:5px; }
    .progress-step.active{ background:#007AFF; }

    /* Custom dropdown (버튼형) */
    .select{
      width:100%; max-width:var(--w);
      position:relative; margin:10px 0;
    }
    .select button.trigger{
      width:100%; padding:10px 12px; font-size:16px;
      border:1px solid #ccc; border-radius:6px; background:#fff;
      display:flex; justify-content:space-between; align-items:center;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .select button.trigger[disabled]{ opacity:.6; cursor:default; }

    /* 포털 메뉴 */
    .portal{ position:fixed; inset:0; display:none; z-index:9999; }
    .portal.open{ display:block; }
    .portal .backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.25); }
    .portal .panel{
      position:absolute; left:50%; transform:translateX(-50%);
      top:20vh; width:min(92vw, var(--w));
      max-height:60vh; overflow:auto;
      background:#fff; border-radius:10px; box-shadow:0 12px 32px rgba(0,0,0,.35);
    }
    .item{ padding:12px 14px; border-bottom:1px solid #eee; font-size:16px; cursor:pointer; }
    .item:last-child{ border-bottom:none; }
    .item:hover{ background:#f7f7f7; }
    .item.active{ background:#e8f1ff; }

    img{
      display:block; max-width:100%; height:auto; margin:20px 0;
      border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,.2); cursor:pointer;
    }
    .footer{ margin-top:20px; color:#555; font-size:14px; }
    .footer a{ color:#007AFF; text-decoration:none; }
  </style>
</head>
<body>
  <h1>ArcPulse Simulator</h1>

  <div class="progress-bar">
    <div id="step1" class="progress-step active"></div>
    <div id="step2" class="progress-step"></div>
    <div id="step3" class="progress-step"></div>
  </div>

  <!-- 커스텀 드롭다운 3개 -->
  <div class="select">
    <button id="btn-model" class="trigger" aria-haspopup="listbox" aria-expanded="false">Select iPhone Model ▾</button>
  </div>
  <div class="select">
    <button id="btn-color" class="trigger" disabled aria-haspopup="listbox" aria-expanded="false">Select iPhone Color ▾</button>
  </div>
  <div class="select">
    <button id="btn-arc" class="trigger" disabled aria-haspopup="listbox" aria-expanded="false">Select ArcPulse Color ▾</button>
  </div>

  <!-- 포털 메뉴 (하나를 공용으로 사용) -->
  <div id="portal" class="portal" role="dialog" aria-modal="true">
    <div class="backdrop"></div>
    <div id="panel" class="panel" role="listbox" aria-activedescendant=""></div>
  </div>

  <img id="product-image" alt="ArcPulse Image" style="display:none;" onclick="openImageInNewTab()"/>

  <div class="footer">
    Powered by <a href="https://smartstore.naver.com/d2cstore/category/e7bff70f5f304d21bf7eebac682c87e0?cp=1" target="_blank">DKSTORE</a> 2025
  </div>

  <script>
    // ===== 데이터 =====
    const iphoneColors = {
      "15_series": ["Black Titanium", "White Titanium", "Blue Titanium", "Natural Titanium"],
      "16_series": ["Black Titanium", "White Titanium", "Natural Titanium", "Desert Titanium"],
      "17_series": ["White", "Cosmic Orange", "Deep Blue"]
    };
    const arcColors = {
      "15_series": ["Matte Black", "Mirror Silver", "Titan Gray", "Aurora Blue", "Mirror Gold"],
      "16_series": ["Matte Black", "Mirror Silver", "Graphite", "Rose Bronze", "Black Onyx"],
      "17_series": ["Matte Black", "Mirror Silver", "Graphite", "Rose Bronze", "Mirror Gold", "Black Onyx"]
    };
    const imageUrls = {
      "15_series": {
        "black_titanium": {
          "matte_black":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Black-Aluminum.png?v=1699881973&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Black-AluminumMirrorPolishSilver.png?v=1699882058&width=600",
          "titan_gray":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Black-AluminumTitanGray.png?v=1699882058&width=600",
          "aurora_blue":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Black-AluminumAuroraBlue.png?v=1709031096&width=600",
          "mirror_gold":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Black-AluminumMirrorPolishGold.png?v=1699882058&width=600"
        },
        "white_titanium": {
          "matte_black":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Silver-Aluminum.png?v=1699882058&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Silver-AluminumMirrorPolishSilver.png?v=1699882058&width=600",
          "titan_gray":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Silver-AluminumTitanGray.png?v=1699882058&width=600",
          "aurora_blue":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Silver-AluminumAuroraBlue.png?v=1709031094&width=600",
          "mirror_gold":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Silver-AluminumMirrorPolishGold.png?v=1699882058&width=600"
        },
        "blue_titanium": {
          "matte_black":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-DarkBlue-Aluminum.png?v=1699881861&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-DarkBlue-AluminumMirrorPolishSilver.png?v=1699881861&width=600",
          "titan_gray":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-DarkBlue-AluminumTitanGray.png?v=1699881973&width=600",
          "aurora_blue":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-DarkBlue-AluminumAuroraBlue.png?v=1709031096&width=600",
          "mirror_gold":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-DarkBlue-AluminumMirrorPolishGold.png?v=1699881973&width=600"
        },
        "natural_titanium": {
          "matte_black":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Gray-Aluminum.png?v=1694785422&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Gray-AluminumMirrorPolishSilver.png?v=1694785422&width=600",
          "titan_gray":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Gray-AluminumTitanGray.png?v=1699881861&width=600",
          "aurora_blue":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Gray-AluminumAuroraBlue.png?v=1709031097&width=600",
          "mirror_gold":"https://arc.cc/cdn/shop/files/ArcPulseForIPhone15Pro-Gray-AluminumMirrorPolishGold.png?v=1699881861&width=600"
        }
      },
      "16_series": {
        "black_titanium": {
          "matte_black":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Black-MatteBlack.png?v=1726148610&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Black-Silver.png?v=1726147789&width=600",
          "graphite":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Black-Graphite.png?v=1726148768&width=600",
          "rose_bronze":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Black-RoseBronze.png?v=1726148287&width=600",
          "black_onyx":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Black-OnyxBlack.png?v=1726148444&width=600"
        },
        "white_titanium": {
          "matte_black":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-White-MatteBlack.png?v=1726148591&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-White-Silver.png?v=1726147805&width=600",
          "graphite":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-White-Graphite.png?v=1726148752&width=600",
          "rose_bronze":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-White-RoseBronze.png?v=1726148326&width=600",
          "black_onyx":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-White-OnyxBlack.png?v=1726148424&width=600"
        },
        "natural_titanium": {
          "matte_black":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Natural-MatteBlack.png?v=1726583890&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Natural-Silver.png?v=1726583779&width=600",
          "graphite":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Natural-Graphite.png?v=1726583924&width=600",
          "rose_bronze":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Natural-RoseBronze.png?v=1726583827&width=600",
          "black_onyx":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Natural-OnyxBlack.png?v=1726583859&width=600"
        },
        "desert_titanium": {
          "matte_black":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Desert-MatteBlack.png?v=1726584208&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Desert-Silver.png?v=1726584025&width=600",
          "graphite":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Desert-Graphite.png?v=1726584260&width=600",
          "rose_bronze":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Desert-RoseBronze.png?v=1726584111&width=600",
          "black_onyx":"https://arc.cc/cdn/shop/files/AP16_Pro_ProMax-Desert-OnyxBlack.png?v=1726584163&width=600"
        }
      },
      "17_series": {
        "white": {
          "matte_black":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-White17-MatteBlack.webp?v=1757509177&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-White17-Silver.webp?v=1757509177&width=600",
          "graphite":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-White17-Graphite.webp?v=1757509177&width=600",
          "rose_bronze":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-White17-RoseBronze.webp?v=1757509177&width=600",
          "mirror_gold":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-White17-Gold.webp?v=1757509177&width=600",
          "black_onyx":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-White17-OnyxBlack.webp?v=1757509177&width=600"
        },
        "cosmic_orange": {
          "matte_black":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Orange17-MatteBlack.webp?v=1757509177&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Orange17-Silver.webp?v=1757509177&width=600",
          "graphite":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Orange17-Graphite.webp?v=1757509177&width=600",
          "rose_bronze":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Orange17-RoseBronze.webp?v=1757509177&width=600",
          "mirror_gold":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Orange17-Gold.webp?v=1757509177&width=600",
          "black_onyx":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Orange17-OnyxBlack.webp?v=1757509177&width=600"
        },
        "deep_blue": {
          "matte_black":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Blue17-MatteBlack.webp?v=1757509177&width=600",
          "mirror_silver":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Blue17-Silver.webp?v=1757509177&width=600",
          "graphite":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Blue17-Graphite.webp?v=1757509177&width=600",
          "rose_bronze":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Blue17-RoseBronze.webp?v=1757509177&width=600",
          "mirror_gold":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Blue17-Gold.webp?v=1757509177&width=600",
          "black_onyx":"https://arc.cc/cdn/shop/files/AP17_Pro_ProMax-Blue17-OnyxBlack.webp?v=1757509177&width=600"
        }
      }
    };

    // ===== 상태 =====
    let state = {
      model: "",          // 17_series / 16_series / 15_series
      iphoneColor: "",    // toKey(…)
      arcColor: ""        // toKey(…)
    };

    const el = {
      step2: document.getElementById('step2'),
      step3: document.getElementById('step3'),
      btnModel: document.getElementById('btn-model'),
      btnColor: document.getElementById('btn-color'),
      btnArc:   document.getElementById('btn-arc'),
      portal:   document.getElementById('portal'),
      panel:    document.getElementById('panel'),
      productImage: document.getElementById('product-image'),
    };

    function toKey(s){ return (s||"").toLowerCase().replace(/\s/g,'_'); }

    function openImageInNewTab(){
      if (el.productImage.src) window.open(el.productImage.src, '_blank');
    }
    window.openImageInNewTab = openImageInNewTab;

    // 공용 메뉴 열기
    function openMenu(triggerBtn, items, current, onChoose){
      // 아이템 렌더
      el.panel.innerHTML = "";
      items.forEach(({value,label})=>{
        const div = document.createElement('div');
        div.className = 'item' + (value===current ? ' active':'');
        div.setAttribute('role','option');
        div.dataset.value = value;
        div.textContent = label;
        div.onclick = () => { onChoose(value,label); closeMenu(); };
        el.panel.appendChild(div);
      });

      // 열기
      el.portal.classList.add('open');
      triggerBtn.setAttribute('aria-expanded','true');

      // 닫기
      function onEsc(ev){ if (ev.key === 'Escape') closeMenu(); }
      function closeMenu(){
        el.portal.classList.remove('open');
        triggerBtn.setAttribute('aria-expanded','false');
        document.removeEventListener('keydown', onEsc, true);
      }
      el.portal.querySelector('.backdrop').onclick = closeMenu;
      document.addEventListener('keydown', onEsc, true);
    }

    // 버튼 핸들러
    el.btnModel.onclick = () => {
      const items = [
        { value:'17_series', label:'iPhone 17 Pro / 17 Pro Max' },
        { value:'16_series', label:'iPhone 16 Pro / 16 Pro Max' },
        { value:'15_series', label:'iPhone 15 Pro / 15 Pro Max' },
      ];
      openMenu(el.btnModel, items, state.model, (value, label)=>{
        state.model = value;
        el.btnModel.textContent = label + ' ▾';

        // 2단계 초기화
        state.iphoneColor = "";
        el.btnColor.textContent = 'Select iPhone Color ▾';
        el.btnColor.disabled = false;
        el.btnArc.disabled = true;
        el.btnArc.textContent = 'Select ArcPulse Color ▾';
        el.productImage.style.display = 'none';

        el.step2.classList.add('active');
        el.step3.classList.remove('active');
      });
    };

    el.btnColor.onclick = () => {
      if (el.btnColor.disabled || !state.model) return;
      const list = (iphoneColors[state.model]||[]).map(c => ({ value: toKey(c), label:c }));
      openMenu(el.btnColor, list, state.iphoneColor, (value, label)=>{
        state.iphoneColor = value;
        el.btnColor.textContent = label + ' ▾';

        // 3단계 초기화
        state.arcColor = "";
        el.btnArc.disabled = false;
        el.btnArc.textContent = 'Select ArcPulse Color ▾';
        el.productImage.style.display = 'none';

        el.step3.classList.add('active');
      });
    };

    el.btnArc.onclick = () => {
      if (el.btnArc.disabled || !state.model) return;
      const list = (arcColors[state.model]||[]).map(c => ({ value: toKey(c), label:c }));
      openMenu(el.btnArc, list, state.arcColor, (value, label)=>{
        state.arcColor = value;
        el.btnArc.textContent = label + ' ▾';

        const url = imageUrls[state.model]?.[state.iphoneColor]?.[state.arcColor];
        if (url){
          el.productImage.src = url;
          el.productImage.style.display = 'block';
        } else {
          el.productImage.style.display = 'none';
        }
      });
    };
  </script>
</body>
</html>
